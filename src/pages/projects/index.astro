---
import GardenLayout from '../../layouts/GardenLayout.astro';
import Card from '../../components/garden/Card.astro';
import { getCollection } from 'astro:content';

const projects = await getCollection('projects', ({ data }) => !data.draft);
const sortedProjects = projects.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<GardenLayout title="Projects" description="Things I've built." wide>
  <header class="mb-12">
    <h1 class="text-3xl mb-4" style="font-family: var(--font-serif);">Projects</h1>
    <p class="text-[var(--text-secondary)]">
      A showcase of things I've built, from data visualizations to experimental tools.
    </p>
  </header>

  {sortedProjects.length === 0 ? (
    <p class="text-[var(--text-muted)]">No projects yet. Check back soon.</p>
  ) : (
    <div class="grid md:grid-cols-2 gap-6">
      {sortedProjects.map((project) => (
        <Card
          type="project"
          title={project.data.title}
          description={project.data.description}
          date={project.data.date}
          href={`/projects/${project.id}`}
        />
      ))}
    </div>
  )}
</GardenLayout>
