---
interface Post {
  type: string;
  title: string;
  date: Date;
  href: string;
}

interface Props {
  posts: Post[];
}

const { posts } = Astro.props;

function formatDate(date: Date): string {
  return date.toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'short',
  });
}

const typeLabels: Record<string, string> = {
  'essay': 'essay',
  'note': 'note',
  'book-review': 'book',
  'film-review': 'film',
  'linkpost': 'links',
  'review': 'review',
};
---

<ul class="divide-y divide-[var(--border)]">
  {posts.map(post => (
    <li>
      <a href={post.href} class="post-item group">
        <div class="flex items-center gap-3 min-w-0">
          <span class="tag tag-type shrink-0 w-14 text-center">
            {typeLabels[post.type] || post.type}
          </span>
          <span class="text-[var(--text-primary)] group-hover:text-[var(--accent)] transition-colors truncate">
            {post.title}
          </span>
        </div>
        <span class="text-sm text-[var(--text-muted)] shrink-0 ml-4">
          {formatDate(post.date)}
        </span>
      </a>
    </li>
  ))}
</ul>
