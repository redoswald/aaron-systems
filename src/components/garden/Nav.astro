---
const links = [
  { href: '/projects', label: 'Projects' },
  { href: '/writing', label: 'Writing' },
  { href: '/library', label: 'Library' },
  { href: '/links', label: 'Links' },
  { href: '/about', label: 'About' },
];

const currentPath = Astro.url.pathname;

function isActive(href: string): boolean {
  if (href === '/') return currentPath === '/';
  return currentPath.startsWith(href);
}
---

<nav class="sticky top-0 z-50 bg-[var(--bg-primary)]/80 backdrop-blur-sm border-b border-[var(--border)]">
  <div class="max-w-4xl mx-auto px-6 py-4 flex justify-between items-center">
    <a href="/" class="font-mono text-sm text-[var(--text-primary)] hover:text-[var(--accent)]">
      aaronos<span class="text-[var(--text-muted)]">wald</span>.ai
    </a>

    <!-- Desktop Navigation -->
    <div class="hidden md:flex items-center gap-6">
      {links.map(link => (
        <a
          href={link.href}
          class:list={[
            "text-sm transition-colors",
            isActive(link.href)
              ? "text-[var(--text-primary)]"
              : "text-[var(--text-secondary)] hover:text-[var(--text-primary)]"
          ]}
        >
          {link.label}
        </a>
      ))}
    </div>

    <!-- Mobile Navigation Toggle -->
    <button
      id="mobile-menu-toggle"
      class="md:hidden p-2 -mr-2 text-[var(--text-secondary)] hover:text-[var(--text-primary)]"
      aria-label="Toggle menu"
    >
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="hidden md:hidden border-t border-[var(--border)] bg-[var(--bg-primary)]">
    <div class="px-6 py-4 flex flex-col gap-4">
      {links.map(link => (
        <a
          href={link.href}
          class:list={[
            "text-sm transition-colors",
            isActive(link.href)
              ? "text-[var(--text-primary)]"
              : "text-[var(--text-secondary)] hover:text-[var(--text-primary)]"
          ]}
        >
          {link.label}
        </a>
      ))}
    </div>
  </div>
</nav>

<script>
  const toggle = document.getElementById('mobile-menu-toggle');
  const menu = document.getElementById('mobile-menu');

  toggle?.addEventListener('click', () => {
    menu?.classList.toggle('hidden');
  });
</script>
