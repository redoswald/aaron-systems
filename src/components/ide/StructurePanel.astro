---
interface Heading {
  depth: number;
  slug: string;
  text: string;
}

interface Props {
  headings?: Heading[];
}

const { headings = [] } = Astro.props;
---

<div class="w-[200px] border-l border-[var(--color-border)] flex flex-col overflow-hidden bg-[var(--color-bg-panel)]">
  <div class="ide-panel-header">Structure</div>

  <div class="flex-1 overflow-auto p-2">
    {headings.length === 0 ? (
      <p class="text-xs text-[var(--color-text-muted)] p-2">No headings</p>
    ) : (
      <nav>
        {headings.map(heading => (
          <a
            href={`#${heading.slug}`}
            class="tree-item text-xs"
            style={`padding-left: ${8 + (heading.depth - 1) * 12}px;`}
          >
            <span class="text-[var(--color-text-muted)] mr-1">
              {heading.depth === 1 ? 'H1' : heading.depth === 2 ? 'H2' : 'H3'}
            </span>
            <span class="truncate">{heading.text}</span>
          </a>
        ))}
      </nav>
    )}
  </div>
</div>
